<%- content_for :html_title do -%>Edit Campaign Details: <%= @campaign.name %><%- end -%>

<h1>Editing campaign</h1>

<%= error_messages_for :campaign %>
<div id="new_campaign" class="campaign_form">
	<% form_for([:dt, @campaign], :html => {:multipart => true}) do |f| %>

		<fieldset>
			<legend>Campaign Details</legend>
			<label>Name</label>
			<%= f.text_field :name, :maxlength => 50, :size => 50 %>

	    <label>Campaign type</label>
			<%= collection_select :campaign_type, :id, CampaignType.find(:all), :id, :name %>

			<label>Contact Email</label>
			<%= f.text_field :email, :maxlength => 75, :size => 50 %> 
			<% f.check_box :use_user_email, :onclick => "Element.toggle('campaign_email');"%> 
	
			<label>Description</label>
			<%= fckeditor_textarea( "campaign", "description", :toolbarSet=> 'ChristmasFuture', :height => 200 ) %> 
			
			<label>Upload a Campaign image < 500 kb.  If you don't upload one a default image will be used for you.  You can also come back and upload your photo later.</label>
			<%= upload_column_field :campaign,  :picture  %>
			
		</fieldset>

		<fieldset>
			<legend>Monetary Details</legend>
	
			<label>Fundraising Goal</label> <span class="small_text"></span>
		    <%= f.text_field :fundraising_goal %> <span class="small_text">CAD $</span>

			<label>Campaign Fee</label>
			<%= f.text_field :fee_amount %> <span class="small_text">CAD $</span>

		</fieldset>

		<fieldset>
			<legend>Campaign Dates: <%= form_required %></legend>
			<label>Start of fundraising:</label>
	    	<%= f.datetime_select :start_date %>
			
			<label>Event Date: <%= form_required %></label>
	    	<%= f.datetime_select :event_date %>
	    	
	    <label>Raise Funds Till: <%= form_required %></label>
	    	<%= f.datetime_select :raise_funds_till_date %>
	    	
	    <label>Allocate Funds By: <%= form_required %></label>
	    	<%= f.datetime_select :allocate_funds_by_date %>
		</fieldset>

		<fieldset>
			<legend>Location</legend>
			<label>Address</label>
			<%= f.text_field :address %>
			<label>Country</label>
			<%= f.country_select :country, ["Canada", "United States"]  %>

			<%= observe_field :campaign_country, 
									:frequency => 0.25, 
									:url => { :action => :update_address_details_for_country}, 
									:with => :country
			%>		
			<label id="postal_code">Postalcode</label>
			<%= f.text_field :postalcode %>

			<label id="province">Province</label>
			<%= f.text_field :province %>
	
			<label>City</label>
			<%= f.text_field :city %>
	
		</fieldset>

		<fieldset id="team_settings">
			<legend>Team Settings</legend>
			<label>Require Authorization to Add Team</label>
			<%= f.check_box :require_team_authorization %>
	
			<label>Allow Multiple Teams</label>
			<%= f.check_box :allow_multiple_teams %>
		</fieldset>

		<fieldset id="participant_settings" style="display:none;">
			<legend>Participant Settings</legend>
			<label>Require Authorization to Join Campaign</label>
			<%= f.check_box :require_team_authorization %>
	
		</fieldset>
		<p>
    	<%= f.submit "Update" %>
  	</p>

	<% end %>
</div>
<%= link_to 'Show', dt_campaign_path(@campaign) %> |
<%= link_to 'Back', manage_dt_campaign_path(@campaign) %>
